#!/usr/bin/env python
'''
GLStandardDrawingWindow
----------
**GLStandardDrawingWindow** creates a QGLWidget of my thinking of a
standard window to draw. it handles the minimumSizeHint,sizeHint, initializeGL,
and resizeGLstandard
attributes
----------
        * standard width = 550
        * standard height = 500
        * history a Stack to kep track of the objects drawn on it
        * black background
        * white foreground
'''
import sys
import math

import OpenGL.GL as GL
import OpenGL.GLU as GLU
from PyQt5.QtGui import QMatrix4x4 , QVector3D
from PyQt5.QtOpenGL import QGLWidget 
from PyQt5.QtWidgets import QApplication, QMainWindow, QOpenGLWidget
from PyQt5.QtCore import QSize
from PyQt5.QtCore import pyqtSignal, QFileInfo, QPoint, QSize, Qt, QTimer
from PyQt5.QtWidgets import QApplication, QGridLayout, QOpenGLWidget, QWidget
from OpenGL.raw.GL.ARB.vertex_array_object import glGenVertexArrays, \
                                                  glBindVertexArray

class GLStandardDrawingWindow3D(QOpenGLWidget):
    def __init__(self, parent = None):
        super(QOpenGLWidget, self).__init__(parent)
        self.width, self.height = 100.0, 100.0
        self.move(100, 100)
        self.matrix = QMatrix4x4()
        self.pos = QVector3D(0, 1.5, 3)
        self.dir = QVector3D(0, 0, 0)
        self.up = QVector3D(0, 1, 0)

    def minimumSizeHint(self):
        return QSize(self.width, self.height)

    def sizeHint(self):
        return QSize(self.width, self.height)

    def initializeGL(self):
        GL.glEnable(GL.GL_LIGHT0);
        GL.glEnable(GL.GL_LIGHTING);
        GL.glClearColor(0.0, 0.0, 0.0, 1.0)
        GL.glFlush()

    def resizeGL(self, w, h):
        self.width, self.height = w,h
        GL.glViewport(-w, -h, w, h)
        GL.glMatrixMode(GL.GL_PROJECTION)
        self.matrix.setToIdentity()
        ratio = w // h
        self.matrix.perspective(90, ratio, 0.5, 40)
        self.matrix.frustum(-1, 1, -1, 1, 0.1, 40);
        self.matrix.lookAt(self.pos, self.dir, self.up)
        GL.glMatrixMode(GL.GL_MODELVIEW)
        GL.glLoadIdentity()